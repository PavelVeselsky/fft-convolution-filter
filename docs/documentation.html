<html>
<body>
<h2>FFT Convolution Documentation</h2>

<p>
<h3>Introduction</h3>

FFT Convolution plugin's core was build with the Plugin builder; most of the files and functions come from it.
This documentation is focused on the others, specific for this plugin.
<p>
<h3>File architecture</h3>

The following files in the plugin repository were autogenerated by Plugin Builder and weren't changed:

<p>__init__.py
<br>fft_filter_dialog.py
<br>Makefile
<br>resources.qrc
<br>resources.py
<p>
Other pregenerated files were changed:

<p>fft_filter_dialog_base.ui
<p>fft_filter_dialog_base.py
<br>fft_filter.py
<br>icon.png
<br>metadata.txt
<br>README.html
<br>README.txt
<p>
Other files are new:

<p>LICENSE.txt - GPL 3.0
<br>docs/ - subdirectory for documentation
<br>docs/version0.1.1.txt - what's new in current version
<br>docs/documentation.html
<br>docs/documentation.txt
<br>examples/ - example data
<br>examples/metadata.txt - documentation of examples
<br>examples/smallaster.img - raster example taken from Chris Garrard's Python for Geoprocessing course materials
<p>
<h3>FFTConvolution class overview - file fft_filter.py</h3>

Some methods were autogenerated by Plugin Builder - they don't need special documentation here:

<p>__init__
<br>tr
<br>add_action
<br>initGui
<br>unload
<br>select_output_file
<p>
Other methods are new:
<p>
<h4>fft_convolution</h4>
This method parses the arguments and passes them to the gaussian_filter method.
<p>
<i><b>parameters:</b></i>
<p><b>in_layer</b> - input layer as an object of class QgsRasterLayer.
<br><b>out_path</b> - path to the output layer.
<br><b>size (optional)</b> - size of the filtering buffer in pixels. Default is 10.
<br><b>edge (optional)</b> - either False for smoothing or True for edge detection. Default is False.
<br><b>new_crs (optional)</b> - coordinate system as an object of class QgsCoordinateReferenceSystem. Default is None.
<br><b>tiled (optional)</b> - True means the windowed algorithm will be used. Default is False.
<br><b>tilerows (optional)</b> - size of the tile's x-axis. Default 0 means that either tilecols, raster's native blocks or windows computed from the filter size will be used (in this order).
<br><b>tilecols (optional)</b> - size of the tile's y-axis. Default 0 means that either tilerows, raster's native blocks or windows computed from the filter size will be used (in this order).
<br><b>add_layer (optional)</b> - True means the output layer will be added to the map. Default is True.
<p>
<i><b>Return value:</b></i> void

<p>
<h4>gaussian_filter</h4>
Filters a raster specified by the file's path and writes it to another file.
<p>
<i><b>parameters:</b></i>
<p><b>in_path</b> - path to the output layer.
<br><b>out_path</b> - path to the output layer.
<br><b>size (optional)</b> - size of the filtering buffer in pixels. Default is 10.
<br><b>edge (optional)</b> - either False for smoothing or True for edge detection. Default is False.
<br><b>new_crs (optional)</b> - coordinate system as an object of class QgsCoordinateReferenceSystem. Default is None.
<br><b>tiled (optional)</b> - True means the windowed algorithm will be used. Default is False.
<br><b>tilerows (optional)</b> - size of the tile's x-axis. Default 0 means that either tilecols, raster's native blocks or windows computed from the filter size will be used (in this order).
<br><b>tilecols (optional)</b> - size of the tile's y-axis. Default 0 means that either tilerows, raster's native blocks or windows computed from the filter size will be used (in this order).
<br><b>add_layer (optional)</b> - True means the output layer will be added to the map. Default is True.
<p>
<i><b>Return value:</b></i> output layer - QgsRasterLayer

<p>
<h4>__array_rank</h4>
Returns number of array dimensionsreturns number of array dimensions.

<p>
<h4>__load_layer</h4>
Loads the newly created layer after running gaussian_filter.

<p>
<h4>__extend_window</h4>
Pads the window to process its original extend accurately.

<p>
<h4>__generate_windows</h4>
Creates a window generator, in the same format as it is returned by block_windows rasterio method.

<p>
<h4>__generate_window_array</h4>
Like __generate_windows(), but returns an array.

<p>
<h4>__compute_windows</h4>
Processes the window parameters.
<p>
<i><b>Return value:</b></i> either generator or array of windows

<p>
<h4>__compute_transform</h4>
Computes the affine transformation, raster dimensions and metadata for the new raster.

<p>
<h4>__reproject</h4>
Calls reproject() function for every band.

<p>
<h4>__gaussian_blur1d</h4>
The original MikeT's function from http://gis.stackexchange.com/a/10467. My addition is the conversion of the padded array to float to avoid errors with integer rasters.
The intended input is a single band raster array.

<p>
<h4>__gaussian_blur</h4>
The intended input is an array with various number of bands.

</body>
</html>
